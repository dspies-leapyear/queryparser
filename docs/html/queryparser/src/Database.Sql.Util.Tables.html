<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- Copyright (c) 2017 Uber Technologies, Inc.</span><span>
</span><a name="line-2"></a><span class="hs-comment">--</span><span>
</span><a name="line-3"></a><span class="hs-comment">-- Permission is hereby granted, free of charge, to any person obtaining a copy</span><span>
</span><a name="line-4"></a><span class="hs-comment">-- of this software and associated documentation files (the &quot;Software&quot;), to deal</span><span>
</span><a name="line-5"></a><span class="hs-comment">-- in the Software without restriction, including without limitation the rights</span><span>
</span><a name="line-6"></a><span class="hs-comment">-- to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span><span>
</span><a name="line-7"></a><span class="hs-comment">-- copies of the Software, and to permit persons to whom the Software is</span><span>
</span><a name="line-8"></a><span class="hs-comment">-- furnished to do so, subject to the following conditions:</span><span>
</span><a name="line-9"></a><span class="hs-comment">--</span><span>
</span><a name="line-10"></a><span class="hs-comment">-- The above copyright notice and this permission notice shall be included in</span><span>
</span><a name="line-11"></a><span class="hs-comment">-- all copies or substantial portions of the Software.</span><span>
</span><a name="line-12"></a><span class="hs-comment">--</span><span>
</span><a name="line-13"></a><span class="hs-comment">-- THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span><span>
</span><a name="line-14"></a><span class="hs-comment">-- IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span><span>
</span><a name="line-15"></a><span class="hs-comment">-- FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span><span>
</span><a name="line-16"></a><span class="hs-comment">-- AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span><span>
</span><a name="line-17"></a><span class="hs-comment">-- LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span><span>
</span><a name="line-18"></a><span class="hs-comment">-- OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span><span>
</span><a name="line-19"></a><span class="hs-comment">-- THE SOFTWARE.</span><span>
</span><a name="line-20"></a><span>
</span><a name="line-21"></a><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><a name="line-22"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Database</span><span class="hs-operator">.</span><span class="hs-identifier">Sql</span><span class="hs-operator">.</span><span class="hs-identifier">Util</span><span class="hs-operator">.</span><span class="hs-identifier">Tables</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-23"></a><span>
</span><a name="line-24"></a><span class="hs-keyword">import</span><span>           </span><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">Foldable</span><span>
</span><a name="line-25"></a><span>
</span><a name="line-26"></a><span class="hs-keyword">import</span><span>           </span><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">Set</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Set</span><span class="hs-special">)</span><span>
</span><a name="line-27"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">Set</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">S</span><span>
</span><a name="line-28"></a><span>
</span><a name="line-29"></a><span class="hs-keyword">import</span><span>           </span><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">Map</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Map</span><span class="hs-special">)</span><span>
</span><a name="line-30"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">Map</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">M</span><span>
</span><a name="line-31"></a><span>
</span><a name="line-32"></a><span class="hs-keyword">import</span><span>           </span><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">Ord</span><span>
</span><a name="line-33"></a><span class="hs-keyword">import</span><span>           </span><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">Monoid</span><span>
</span><a name="line-34"></a><span class="hs-keyword">import</span><span>           </span><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">Maybe</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">catMaybes</span><span class="hs-special">)</span><span>
</span><a name="line-35"></a><span>
</span><a name="line-36"></a><span class="hs-keyword">import</span><span>           </span><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">List</span><span class="hs-operator">.</span><span class="hs-identifier">NonEmpty</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">NonEmpty</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-37"></a><span class="hs-keyword">import</span><span>           </span><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">Text</span><span class="hs-operator">.</span><span class="hs-identifier">Lazy</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Text</span><span class="hs-special">)</span><span>
</span><a name="line-38"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">Text</span><span class="hs-operator">.</span><span class="hs-identifier">Lazy</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">TL</span><span>
</span><a name="line-39"></a><span>
</span><a name="line-40"></a><span class="hs-keyword">import</span><span>           </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Monad</span><span class="hs-operator">.</span><span class="hs-identifier">Identity</span><span>
</span><a name="line-41"></a><span class="hs-keyword">import</span><span>           </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Monad</span><span class="hs-operator">.</span><span class="hs-identifier">Writer</span><span>
</span><a name="line-42"></a><span class="hs-keyword">import</span><span>           </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Monad</span><span class="hs-operator">.</span><span class="hs-identifier">Reader</span><span>
</span><a name="line-43"></a><span class="hs-keyword">import</span><span>           </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Monad</span><span class="hs-operator">.</span><span class="hs-identifier">State</span><span>
</span><a name="line-44"></a><span>
</span><a name="line-45"></a><span class="hs-keyword">import</span><span>           </span><a href="Database.Sql.Type.html"><span class="hs-identifier">Database</span><span class="hs-operator">.</span><span class="hs-identifier">Sql</span><span class="hs-operator">.</span><span class="hs-identifier">Type</span></a><span>
</span><a name="line-46"></a><span class="hs-keyword">import</span><span>           </span><a href="Database.Sql.Position.html"><span class="hs-identifier">Database</span><span class="hs-operator">.</span><span class="hs-identifier">Sql</span><span class="hs-operator">.</span><span class="hs-identifier">Position</span></a><span>
</span><a name="line-47"></a><span>
</span><a name="line-48"></a><span>
</span><a name="line-49"></a><span class="hs-comment">-- This describes the usage of a particular table, whether it was read from or</span><span>
</span><a name="line-50"></a><span class="hs-comment">-- written to. Note that if a table is used in both modes, it will show up</span><span>
</span><a name="line-51"></a><span class="hs-comment">-- twice as each mode.</span><span>
</span><a name="line-52"></a><span class="hs-keyword">data</span><span> </span><a name="UsageMode"><a href="Database.Sql.Util.Tables.html#UsageMode"><span class="hs-identifier">UsageMode</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="ReadData"><a href="Database.Sql.Util.Tables.html#ReadData"><span class="hs-identifier">ReadData</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><a name="ReadMeta"><a href="Database.Sql.Util.Tables.html#ReadMeta"><span class="hs-identifier">ReadMeta</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><a name="WriteData"><a href="Database.Sql.Util.Tables.html#WriteData"><span class="hs-identifier">WriteData</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><a name="WriteMeta"><a href="Database.Sql.Util.Tables.html#WriteMeta"><span class="hs-identifier">WriteMeta</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><a name="Unknown"><a href="Database.Sql.Util.Tables.html#Unknown"><span class="hs-identifier">Unknown</span></a></a><span>
</span><a name="line-53"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Show</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Ord</span><span class="hs-special">)</span><span>
</span><a name="line-54"></a><span>
</span><a name="line-55"></a><span class="hs-keyword">data</span><span> </span><a name="TableUse"><a href="Database.Sql.Util.Tables.html#TableUse"><span class="hs-identifier">TableUse</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="TableUse"><a href="Database.Sql.Util.Tables.html#TableUse"><span class="hs-identifier">TableUse</span></a></a><span> </span><a href="Database.Sql.Util.Tables.html#UsageMode"><span class="hs-identifier hs-type">UsageMode</span></a><span> </span><a href="Database.Sql.Type.Names.html#FullyQualifiedTableName"><span class="hs-identifier hs-type">FullyQualifiedTableName</span></a><span>
</span><a name="line-56"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Show</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Ord</span><span class="hs-special">)</span><span>
</span><a name="line-57"></a><span>
</span><a name="line-58"></a><span>
</span><a name="line-59"></a><span class="hs-identifier">getTables</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><a href="#local-6989586621679338098"><span class="hs-identifier hs-type">q</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679338098"><span class="hs-identifier hs-type">q</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Set</span><span> </span><a href="Database.Sql.Type.Names.html#FullyQualifiedTableName"><span class="hs-identifier hs-type">FullyQualifiedTableName</span></a><span>
</span><a name="line-60"></a><a name="getTables"><a href="Database.Sql.Util.Tables.html#getTables"><span class="hs-identifier">getTables</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">S</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">map</span><span> </span><a href="#local-6989586621679338099"><span class="hs-identifier hs-var">tableFromUsage</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Database.Sql.Util.Tables.html#getUsages"><span class="hs-identifier hs-var">getUsages</span></a><span>
</span><a name="line-61"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-62"></a><span>   </span><a name="local-6989586621679338099"><a href="#local-6989586621679338099"><span class="hs-identifier">tableFromUsage</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Util.Tables.html#TableUse"><span class="hs-identifier hs-var">TableUse</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679338100"><a href="#local-6989586621679338100"><span class="hs-identifier">t</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679338100"><span class="hs-identifier hs-var">t</span></a><span>
</span><a name="line-63"></a><span>
</span><a name="line-64"></a><span class="hs-identifier">getUsages</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><a href="#local-6989586621679338097"><span class="hs-identifier hs-type">q</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679338097"><span class="hs-identifier hs-type">q</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Set</span><span> </span><a href="Database.Sql.Util.Tables.html#TableUse"><span class="hs-identifier hs-type">TableUse</span></a><span>
</span><a name="line-65"></a><a name="getUsages"><a href="Database.Sql.Util.Tables.html#getUsages"><span class="hs-identifier">getUsages</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">execWriter</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">flip</span><span> </span><span class="hs-identifier">runReaderT</span><span> </span><a href="Database.Sql.Util.Tables.html#Unknown"><span class="hs-identifier hs-var">Unknown</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span>
</span><a name="line-66"></a><span>
</span><a name="line-67"></a><span class="hs-keyword">class</span><span> </span><a name="HasTables"><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier">HasTables</span></a></a><span> </span><a name="local-6989586621679337888"><a href="#local-6989586621679337888"><span class="hs-identifier">q</span></a></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-68"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679337888"><span class="hs-identifier hs-type">q</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">ReaderT</span><span> </span><a href="Database.Sql.Util.Tables.html#UsageMode"><span class="hs-identifier hs-type">UsageMode</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Writer</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Set</span><span> </span><a href="Database.Sql.Util.Tables.html#TableUse"><span class="hs-identifier hs-type">TableUse</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-69"></a><span>
</span><a name="line-70"></a><span class="hs-comment">-- Note that vertica and hive statements have their own table usage instances</span><span>
</span><a name="line-71"></a><span class="hs-comment">-- in their type file. Changes made here should also reflect there.</span><span>
</span><a name="line-72"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#Statement"><span class="hs-identifier hs-type">Statement</span></a><span> </span><a href="#local-6989586621679338081"><span class="hs-identifier hs-type">d</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679338082"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-73"></a><span>  </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#QueryStmt"><span class="hs-identifier hs-var">QueryStmt</span></a><span> </span><a name="local-6989586621679338083"><a href="#local-6989586621679338083"><span class="hs-identifier">q</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338083"><span class="hs-identifier hs-var">q</span></a><span>
</span><a name="line-74"></a><span>  </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#InsertStmt"><span class="hs-identifier hs-var">InsertStmt</span></a><span> </span><a name="local-6989586621679338084"><a href="#local-6989586621679338084"><span class="hs-identifier">i</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338084"><span class="hs-identifier hs-var">i</span></a><span>
</span><a name="line-75"></a><span>  </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#UpdateStmt"><span class="hs-identifier hs-var">UpdateStmt</span></a><span> </span><a name="local-6989586621679338085"><a href="#local-6989586621679338085"><span class="hs-identifier">u</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338085"><span class="hs-identifier hs-var">u</span></a><span>
</span><a name="line-76"></a><span>  </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#DeleteStmt"><span class="hs-identifier hs-var">DeleteStmt</span></a><span> </span><a name="local-6989586621679338086"><a href="#local-6989586621679338086"><span class="hs-identifier">d</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338086"><span class="hs-identifier hs-var">d</span></a><span>
</span><a name="line-77"></a><span>  </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#TruncateStmt"><span class="hs-identifier hs-var">TruncateStmt</span></a><span> </span><a name="local-6989586621679338087"><a href="#local-6989586621679338087"><span class="hs-identifier">t</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338087"><span class="hs-identifier hs-var">t</span></a><span>
</span><a name="line-78"></a><span>  </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#CreateTableStmt"><span class="hs-identifier hs-var">CreateTableStmt</span></a><span> </span><a name="local-6989586621679338088"><a href="#local-6989586621679338088"><span class="hs-identifier">c</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338088"><span class="hs-identifier hs-var">c</span></a><span>
</span><a name="line-79"></a><span>  </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#AlterTableStmt"><span class="hs-identifier hs-var">AlterTableStmt</span></a><span> </span><a name="local-6989586621679338089"><a href="#local-6989586621679338089"><span class="hs-identifier">a</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338089"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-80"></a><span>  </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#DropTableStmt"><span class="hs-identifier hs-var">DropTableStmt</span></a><span> </span><a name="local-6989586621679338090"><a href="#local-6989586621679338090"><span class="hs-identifier">d</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338090"><span class="hs-identifier hs-var">d</span></a><span>
</span><a name="line-81"></a><span>  </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#CreateViewStmt"><span class="hs-identifier hs-var">CreateViewStmt</span></a><span> </span><a name="local-6989586621679338091"><a href="#local-6989586621679338091"><span class="hs-identifier">c</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338091"><span class="hs-identifier hs-var">c</span></a><span>
</span><a name="line-82"></a><span>  </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#DropViewStmt"><span class="hs-identifier hs-var">DropViewStmt</span></a><span> </span><a name="local-6989586621679338092"><a href="#local-6989586621679338092"><span class="hs-identifier">d</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338092"><span class="hs-identifier hs-var">d</span></a><span>
</span><a name="line-83"></a><span>  </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#CreateSchemaStmt"><span class="hs-identifier hs-var">CreateSchemaStmt</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-84"></a><span>  </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#GrantStmt"><span class="hs-identifier hs-var">GrantStmt</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-85"></a><span>  </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#RevokeStmt"><span class="hs-identifier hs-var">RevokeStmt</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-86"></a><span>  </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#BeginStmt"><span class="hs-identifier hs-var">BeginStmt</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-87"></a><span>  </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#CommitStmt"><span class="hs-identifier hs-var">CommitStmt</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-88"></a><span>  </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#RollbackStmt"><span class="hs-identifier hs-var">RollbackStmt</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-89"></a><span>  </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#ExplainStmt"><span class="hs-identifier hs-var">ExplainStmt</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679338093"><a href="#local-6989586621679338093"><span class="hs-identifier">s</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338093"><span class="hs-identifier hs-var">s</span></a><span>
</span><a name="line-90"></a><span>  </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#EmptyStmt"><span class="hs-identifier hs-var">EmptyStmt</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-91"></a><span>
</span><a name="line-92"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679338067"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-93"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#QuerySelect"><span class="hs-identifier hs-var">QuerySelect</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679338068"><a href="#local-6989586621679338068"><span class="hs-identifier">select</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338068"><span class="hs-identifier hs-var">select</span></a><span>
</span><a name="line-94"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#QueryExcept"><span class="hs-identifier hs-var">QueryExcept</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679338069"><a href="#local-6989586621679338069"><span class="hs-identifier">lhs</span></a></a><span> </span><a name="local-6989586621679338070"><a href="#local-6989586621679338070"><span class="hs-identifier">rhs</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mapM_</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><span class="hs-special">[</span><a href="#local-6989586621679338069"><span class="hs-identifier hs-var">lhs</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679338070"><span class="hs-identifier hs-var">rhs</span></a><span class="hs-special">]</span><span>
</span><a name="line-95"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#QueryUnion"><span class="hs-identifier hs-var">QueryUnion</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679338071"><a href="#local-6989586621679338071"><span class="hs-identifier">lhs</span></a></a><span> </span><a name="local-6989586621679338072"><a href="#local-6989586621679338072"><span class="hs-identifier">rhs</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mapM_</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><span class="hs-special">[</span><a href="#local-6989586621679338071"><span class="hs-identifier hs-var">lhs</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679338072"><span class="hs-identifier hs-var">rhs</span></a><span class="hs-special">]</span><span>
</span><a name="line-96"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#QueryIntersect"><span class="hs-identifier hs-var">QueryIntersect</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679338073"><a href="#local-6989586621679338073"><span class="hs-identifier">lhs</span></a></a><span> </span><a name="local-6989586621679338074"><a href="#local-6989586621679338074"><span class="hs-identifier">rhs</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mapM_</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><span class="hs-special">[</span><a href="#local-6989586621679338073"><span class="hs-identifier hs-var">lhs</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679338074"><span class="hs-identifier hs-var">rhs</span></a><span class="hs-special">]</span><span>
</span><a name="line-97"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#QueryWith"><span class="hs-identifier hs-var">QueryWith</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679338075"><a href="#local-6989586621679338075"><span class="hs-identifier">ctes</span></a></a><span> </span><a name="local-6989586621679338076"><a href="#local-6989586621679338076"><span class="hs-identifier">query</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mapM_</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679338076"><span class="hs-identifier hs-var">query</span></a><span> </span><span class="hs-glyph">:</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-identifier">cteQuery</span><span> </span><a href="#local-6989586621679338075"><span class="hs-identifier hs-var">ctes</span></a><span>
</span><a name="line-98"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#QueryOrder"><span class="hs-identifier hs-var">QueryOrder</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679338077"><a href="#local-6989586621679338077"><span class="hs-identifier">orders</span></a></a><span> </span><a name="local-6989586621679338078"><a href="#local-6989586621679338078"><span class="hs-identifier">query</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mapM_</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338077"><span class="hs-identifier hs-var">orders</span></a><span> </span><span class="hs-operator hs-var">&gt;&gt;</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338078"><span class="hs-identifier hs-var">query</span></a><span>
</span><a name="line-99"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#QueryLimit"><span class="hs-identifier hs-var">QueryLimit</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679338079"><a href="#local-6989586621679338079"><span class="hs-identifier">query</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338079"><span class="hs-identifier hs-var">query</span></a><span>
</span><a name="line-100"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#QueryOffset"><span class="hs-identifier hs-var">QueryOffset</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679338080"><a href="#local-6989586621679338080"><span class="hs-identifier">query</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338080"><span class="hs-identifier hs-var">query</span></a><span>
</span><a name="line-101"></a><span>
</span><a name="line-102"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#Select"><span class="hs-identifier hs-type">Select</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679338057"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-103"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#Select"><span class="hs-identifier hs-var">Select</span></a><span> </span><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">sequence_</span><span>
</span><a name="line-104"></a><span>        </span><span class="hs-special">[</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338059"><span class="hs-identifier hs-var">selectCols</span></a><span>
</span><a name="line-105"></a><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">maybe</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338060"><span class="hs-identifier hs-var">selectFrom</span></a><span>
</span><a name="line-106"></a><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">maybe</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338061"><span class="hs-identifier hs-var">selectWhere</span></a><span>
</span><a name="line-107"></a><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">maybe</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338062"><span class="hs-identifier hs-var">selectTimeseries</span></a><span>
</span><a name="line-108"></a><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">maybe</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338063"><span class="hs-identifier hs-var">selectGroup</span></a><span>
</span><a name="line-109"></a><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">maybe</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338064"><span class="hs-identifier hs-var">selectHaving</span></a><span>
</span><a name="line-110"></a><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">maybe</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338065"><span class="hs-identifier hs-var">selectNamedWindow</span></a><span>
</span><a name="line-111"></a><span>        </span><span class="hs-special">]</span><span>
</span><a name="line-112"></a><span>
</span><a name="line-113"></a><span>
</span><a name="line-114"></a><span class="hs-identifier">emitTable</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">MonadWriter</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Set</span><span> </span><a href="Database.Sql.Util.Tables.html#TableUse"><span class="hs-identifier hs-type">TableUse</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679338095"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span>
</span><a name="line-115"></a><span>              </span><span class="hs-identifier hs-type">MonadReader</span><span> </span><a href="Database.Sql.Util.Tables.html#UsageMode"><span class="hs-identifier hs-type">UsageMode</span></a><span> </span><a href="#local-6989586621679338095"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span>
</span><a name="line-116"></a><span>          </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Database.Sql.Type.Names.html#FQTableName"><span class="hs-identifier hs-type">FQTableName</span></a><span> </span><a href="#local-6989586621679338096"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679338095"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-117"></a><a name="emitTable"><a href="Database.Sql.Util.Tables.html#emitTable"><span class="hs-identifier">emitTable</span></a></a><span> </span><a name="local-6989586621679338101"><a href="#local-6989586621679338101"><span class="hs-identifier">t</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-118"></a><span>  </span><a name="local-6989586621679338102"><a href="#local-6989586621679338102"><span class="hs-identifier">r</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">ask</span><span>
</span><a name="line-119"></a><span>  </span><span class="hs-identifier hs-var">tell</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">S</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">singleton</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Sql.Util.Tables.html#TableUse"><span class="hs-identifier hs-var">TableUse</span></a><span> </span><a href="#local-6989586621679338102"><span class="hs-identifier hs-var">r</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Sql.Type.Names.html#fqtnToFQTN"><span class="hs-identifier hs-var">fqtnToFQTN</span></a><span> </span><a href="#local-6989586621679338101"><span class="hs-identifier hs-var">t</span></a><span>
</span><a name="line-120"></a><span>
</span><a name="line-121"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><a href="#local-6989586621679338053"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">,</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><a href="#local-6989586621679338054"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679338053"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679338054"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-122"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621679338055"><a href="#local-6989586621679338055"><span class="hs-identifier">a</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679338056"><a href="#local-6989586621679338056"><span class="hs-identifier">b</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338055"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-operator hs-var">&gt;&gt;</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338056"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-123"></a><span>
</span><a name="line-124"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Names.html#RColumnRef"><span class="hs-identifier hs-type">RColumnRef</span></a><span> </span><a href="#local-6989586621679338051"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-125"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Names.html#RColumnRef"><span class="hs-identifier hs-var">RColumnRef</span></a><span> </span><a name="local-6989586621679338052"><a href="#local-6989586621679338052"><span class="hs-identifier">fqcn</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#emitTable"><span class="hs-identifier hs-var">emitTable</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier">runIdentity</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">columnNameTable</span><span> </span><a href="#local-6989586621679338052"><span class="hs-identifier hs-var">fqcn</span></a><span>
</span><a name="line-126"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Names.html#RColumnAlias"><span class="hs-identifier hs-var">RColumnAlias</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- the table that introduced it will get iterated over anyway. (shrug)</span><span>
</span><a name="line-127"></a><span>
</span><a name="line-128"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Names.html#FQTableName"><span class="hs-identifier hs-type">FQTableName</span></a><span> </span><a href="#local-6989586621679338049"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-129"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><a name="local-6989586621679338050"><a href="#local-6989586621679338050"><span class="hs-identifier">fqtn</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#emitTable"><span class="hs-identifier hs-var">emitTable</span></a><span> </span><a href="#local-6989586621679338050"><span class="hs-identifier hs-var">fqtn</span></a><span>
</span><a name="line-130"></a><span>
</span><a name="line-131"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Scope.html#RTableName"><span class="hs-identifier hs-type">RTableName</span></a><span> </span><a href="#local-6989586621679338047"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-132"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Scope.html#RTableName"><span class="hs-identifier hs-var">RTableName</span></a><span> </span><a name="local-6989586621679338048"><a href="#local-6989586621679338048"><span class="hs-identifier">table</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#emitTable"><span class="hs-identifier hs-var">emitTable</span></a><span> </span><a href="#local-6989586621679338048"><span class="hs-identifier hs-var">table</span></a><span>
</span><a name="line-133"></a><span>
</span><a name="line-134"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#SelectColumns"><span class="hs-identifier hs-type">SelectColumns</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679338045"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-135"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#SelectColumns"><span class="hs-identifier hs-var">SelectColumns</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679338046"><a href="#local-6989586621679338046"><span class="hs-identifier">columns</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mapM_</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338046"><span class="hs-identifier hs-var">columns</span></a><span>
</span><a name="line-136"></a><span>
</span><a name="line-137"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#SelectFrom"><span class="hs-identifier hs-type">SelectFrom</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679338043"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-138"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#SelectFrom"><span class="hs-identifier hs-var">SelectFrom</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679338044"><a href="#local-6989586621679338044"><span class="hs-identifier">tablishes</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">local</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Sql.Util.Tables.html#ReadData"><span class="hs-identifier hs-var">ReadData</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">mapM_</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338044"><span class="hs-identifier hs-var">tablishes</span></a><span>
</span><a name="line-139"></a><span>
</span><a name="line-140"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#SelectWhere"><span class="hs-identifier hs-type">SelectWhere</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679338041"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-141"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#SelectWhere"><span class="hs-identifier hs-var">SelectWhere</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679338042"><a href="#local-6989586621679338042"><span class="hs-identifier">condition</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338042"><span class="hs-identifier hs-var">condition</span></a><span>
</span><a name="line-142"></a><span>
</span><a name="line-143"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#SelectTimeseries"><span class="hs-identifier hs-type">SelectTimeseries</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679338038"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-144"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#SelectTimeseries"><span class="hs-identifier hs-var">SelectTimeseries</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679338039"><a href="#local-6989586621679338039"><span class="hs-identifier">partition</span></a></a><span> </span><a name="local-6989586621679338040"><a href="#local-6989586621679338040"><span class="hs-identifier">expr</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-145"></a><span>        </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338039"><span class="hs-identifier hs-var">partition</span></a><span>
</span><a name="line-146"></a><span>        </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338040"><span class="hs-identifier hs-var">expr</span></a><span>
</span><a name="line-147"></a><span>
</span><a name="line-148"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#PositionOrExpr"><span class="hs-identifier hs-type">PositionOrExpr</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679338036"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-149"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#PositionOrExprPosition"><span class="hs-identifier hs-var">PositionOrExprPosition</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-150"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#PositionOrExprExpr"><span class="hs-identifier hs-var">PositionOrExprExpr</span></a><span> </span><a name="local-6989586621679338037"><a href="#local-6989586621679338037"><span class="hs-identifier">expr</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338037"><span class="hs-identifier hs-var">expr</span></a><span>
</span><a name="line-151"></a><span>
</span><a name="line-152"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#GroupingElement"><span class="hs-identifier hs-type">GroupingElement</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679338033"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-153"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#GroupingElementExpr"><span class="hs-identifier hs-var">GroupingElementExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679338034"><a href="#local-6989586621679338034"><span class="hs-identifier">posOrExpr</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338034"><span class="hs-identifier hs-var">posOrExpr</span></a><span>
</span><a name="line-154"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#GroupingElementSet"><span class="hs-identifier hs-var">GroupingElementSet</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679338035"><a href="#local-6989586621679338035"><span class="hs-identifier">exprs</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mapM_</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338035"><span class="hs-identifier hs-var">exprs</span></a><span>
</span><a name="line-155"></a><span>
</span><a name="line-156"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#SelectGroup"><span class="hs-identifier hs-type">SelectGroup</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679338031"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-157"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#SelectGroup"><span class="hs-identifier hs-var">SelectGroup</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679338032"><a href="#local-6989586621679338032"><span class="hs-identifier">groupingElements</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mapM_</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338032"><span class="hs-identifier hs-var">groupingElements</span></a><span>
</span><a name="line-158"></a><span>
</span><a name="line-159"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#SelectHaving"><span class="hs-identifier hs-type">SelectHaving</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679338029"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-160"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#SelectHaving"><span class="hs-identifier hs-var">SelectHaving</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679338030"><a href="#local-6989586621679338030"><span class="hs-identifier">havings</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mapM_</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338030"><span class="hs-identifier hs-var">havings</span></a><span>
</span><a name="line-161"></a><span>
</span><a name="line-162"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#SelectNamedWindow"><span class="hs-identifier hs-type">SelectNamedWindow</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679338027"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-163"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#SelectNamedWindow"><span class="hs-identifier hs-var">SelectNamedWindow</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679338028"><a href="#local-6989586621679338028"><span class="hs-identifier">windows</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mapM_</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338028"><span class="hs-identifier hs-var">windows</span></a><span>
</span><a name="line-164"></a><span>
</span><a name="line-165"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#NamedWindowExpr"><span class="hs-identifier hs-type">NamedWindowExpr</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679338024"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-166"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#NamedWindowExpr"><span class="hs-identifier hs-var">NamedWindowExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679338025"><a href="#local-6989586621679338025"><span class="hs-identifier">windowExpr</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338025"><span class="hs-identifier hs-var">windowExpr</span></a><span>
</span><a name="line-167"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#NamedPartialWindowExpr"><span class="hs-identifier hs-var">NamedPartialWindowExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679338026"><a href="#local-6989586621679338026"><span class="hs-identifier">partial</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338026"><span class="hs-identifier hs-var">partial</span></a><span>
</span><a name="line-168"></a><span>
</span><a name="line-169"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#WindowExpr"><span class="hs-identifier hs-type">WindowExpr</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679338021"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-170"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#WindowExpr"><span class="hs-identifier hs-var">WindowExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679338022"><a href="#local-6989586621679338022"><span class="hs-identifier">mPartition</span></a></a><span> </span><a name="local-6989586621679338023"><a href="#local-6989586621679338023"><span class="hs-identifier">orders</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-171"></a><span>        </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338022"><span class="hs-identifier hs-var">mPartition</span></a><span>
</span><a name="line-172"></a><span>        </span><span class="hs-identifier hs-var">mapM_</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338023"><span class="hs-identifier hs-var">orders</span></a><span>
</span><a name="line-173"></a><span>
</span><a name="line-174"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#PartialWindowExpr"><span class="hs-identifier hs-type">PartialWindowExpr</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679338018"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-175"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#PartialWindowExpr"><span class="hs-identifier hs-var">PartialWindowExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679338019"><a href="#local-6989586621679338019"><span class="hs-identifier">mPartition</span></a></a><span> </span><a name="local-6989586621679338020"><a href="#local-6989586621679338020"><span class="hs-identifier">orders</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-176"></a><span>        </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338019"><span class="hs-identifier hs-var">mPartition</span></a><span>
</span><a name="line-177"></a><span>        </span><span class="hs-identifier hs-var">mapM_</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338020"><span class="hs-identifier hs-var">orders</span></a><span>
</span><a name="line-178"></a><span>
</span><a name="line-179"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#Selection"><span class="hs-identifier hs-type">Selection</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679338016"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-180"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#SelectStar"><span class="hs-identifier hs-var">SelectStar</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-181"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#SelectExpr"><span class="hs-identifier hs-var">SelectExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679338017"><a href="#local-6989586621679338017"><span class="hs-identifier">expr</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338017"><span class="hs-identifier hs-var">expr</span></a><span>
</span><a name="line-182"></a><span>
</span><a name="line-183"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#Insert"><span class="hs-identifier hs-type">Insert</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679338010"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-184"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><a href="Database.Sql.Type.html#Insert"><span class="hs-identifier hs-var">Insert</span></a><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-185"></a><span>        </span><span class="hs-identifier hs-var">local</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Sql.Util.Tables.html#WriteData"><span class="hs-identifier hs-var">WriteData</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338013"><span class="hs-identifier hs-var">insertTable</span></a><span>
</span><a name="line-186"></a><span>        </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338015"><span class="hs-identifier hs-var">insertValues</span></a><span>
</span><a name="line-187"></a><span>
</span><a name="line-188"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#InsertValues"><span class="hs-identifier hs-type">InsertValues</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679338007"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-189"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#InsertExprValues"><span class="hs-identifier hs-var">InsertExprValues</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679338008"><a href="#local-6989586621679338008"><span class="hs-identifier">e</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338008"><span class="hs-identifier hs-var">e</span></a><span>
</span><a name="line-190"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#InsertSelectValues"><span class="hs-identifier hs-var">InsertSelectValues</span></a><span> </span><a name="local-6989586621679338009"><a href="#local-6989586621679338009"><span class="hs-identifier">q</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338009"><span class="hs-identifier hs-var">q</span></a><span>
</span><a name="line-191"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#InsertDefaultValues"><span class="hs-identifier hs-var">InsertDefaultValues</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-192"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#InsertDataFromFile"><span class="hs-identifier hs-var">InsertDataFromFile</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-193"></a><span>
</span><a name="line-194"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#DefaultExpr"><span class="hs-identifier hs-type">DefaultExpr</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679338005"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-195"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#DefaultValue"><span class="hs-identifier hs-var">DefaultValue</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-196"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#ExprValue"><span class="hs-identifier hs-var">ExprValue</span></a><span> </span><a name="local-6989586621679338006"><a href="#local-6989586621679338006"><span class="hs-identifier">e</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338006"><span class="hs-identifier hs-var">e</span></a><span>
</span><a name="line-197"></a><span>
</span><a name="line-198"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><a href="#local-6989586621679338003"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">NonEmpty</span><span> </span><a href="#local-6989586621679338003"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-199"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><a name="local-6989586621679338004"><a href="#local-6989586621679338004"><span class="hs-identifier">ne</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mapM_</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338004"><span class="hs-identifier hs-var">ne</span></a><span>
</span><a name="line-200"></a><span>
</span><a name="line-201"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><a href="#local-6989586621679338001"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679338001"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-202"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-203"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621679338002"><a href="#local-6989586621679338002"><span class="hs-identifier">a</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338002"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-204"></a><span>
</span><a name="line-205"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#Update"><span class="hs-identifier hs-type">Update</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679337994"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-206"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><a href="Database.Sql.Type.html#Update"><span class="hs-identifier hs-var">Update</span></a><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-207"></a><span>        </span><span class="hs-identifier hs-var">local</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Sql.Util.Tables.html#WriteData"><span class="hs-identifier hs-var">WriteData</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337996"><span class="hs-identifier hs-var">updateTable</span></a><span>
</span><a name="line-208"></a><span>        </span><span class="hs-identifier hs-var">local</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Sql.Util.Tables.html#ReadData"><span class="hs-identifier hs-var">ReadData</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337998"><span class="hs-identifier hs-var">updateSetExprs</span></a><span>
</span><a name="line-209"></a><span>        </span><span class="hs-identifier hs-var">local</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Sql.Util.Tables.html#ReadData"><span class="hs-identifier hs-var">ReadData</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337999"><span class="hs-identifier hs-var">updateFrom</span></a><span>
</span><a name="line-210"></a><span>        </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679338000"><span class="hs-identifier hs-var">updateWhere</span></a><span>
</span><a name="line-211"></a><span>
</span><a name="line-212"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#Delete"><span class="hs-identifier hs-type">Delete</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679337991"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-213"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#Delete"><span class="hs-identifier hs-var">Delete</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337992"><a href="#local-6989586621679337992"><span class="hs-identifier">table</span></a></a><span> </span><a name="local-6989586621679337993"><a href="#local-6989586621679337993"><span class="hs-identifier">expr</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-214"></a><span>        </span><span class="hs-identifier hs-var">local</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Sql.Util.Tables.html#WriteData"><span class="hs-identifier hs-var">WriteData</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337992"><span class="hs-identifier hs-var">table</span></a><span>
</span><a name="line-215"></a><span>        </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337993"><span class="hs-identifier hs-var">expr</span></a><span>
</span><a name="line-216"></a><span>
</span><a name="line-217"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#CreateTable"><span class="hs-identifier hs-type">CreateTable</span></a><span> </span><a href="#local-6989586621679337982"><span class="hs-identifier hs-type">d</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679337983"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-218"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><a href="Database.Sql.Type.html#CreateTable"><span class="hs-identifier hs-var">CreateTable</span></a><span class="hs-special">{</span><a name="local-6989586621679337985"><a href="#local-6989586621679337985"><span class="hs-identifier">createTableName</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Type.Scope.html#RCreateTableName"><span class="hs-identifier hs-var">RCreateTableName</span></a><span> </span><a name="local-6989586621679337984"><a href="#local-6989586621679337984"><span class="hs-identifier">table</span></a></a><span> </span><a name="local-6989586621679337985"><a href="#local-6989586621679337985"><span class="hs-identifier">_</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-glyph">..</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-219"></a><span>        </span><span class="hs-comment">-- TODO handle createTableExtra, and the dialect instances</span><span>
</span><a name="line-220"></a><span>        </span><span class="hs-identifier hs-var">local</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Sql.Util.Tables.html#WriteData"><span class="hs-identifier hs-var">WriteData</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Sql.Util.Tables.html#emitTable"><span class="hs-identifier hs-var">emitTable</span></a><span> </span><a href="#local-6989586621679337984"><span class="hs-identifier hs-var">table</span></a><span>
</span><a name="line-221"></a><span>        </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337989"><span class="hs-identifier hs-var">createTableDefinition</span></a><span>
</span><a name="line-222"></a><span>
</span><a name="line-223"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#TableDefinition"><span class="hs-identifier hs-type">TableDefinition</span></a><span> </span><a href="#local-6989586621679337977"><span class="hs-identifier hs-type">d</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679337978"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-224"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#TableColumns"><span class="hs-identifier hs-var">TableColumns</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337979"><a href="#local-6989586621679337979"><span class="hs-identifier">s</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337979"><span class="hs-identifier hs-var">s</span></a><span>
</span><a name="line-225"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#TableLike"><span class="hs-identifier hs-var">TableLike</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337980"><a href="#local-6989586621679337980"><span class="hs-identifier">table</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337980"><span class="hs-identifier hs-var">table</span></a><span>
</span><a name="line-226"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#TableAs"><span class="hs-identifier hs-var">TableAs</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337981"><a href="#local-6989586621679337981"><span class="hs-identifier">query</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337981"><span class="hs-identifier hs-var">query</span></a><span>
</span><a name="line-227"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#TableNoColumnInfo"><span class="hs-identifier hs-var">TableNoColumnInfo</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-228"></a><span>
</span><a name="line-229"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#ColumnOrConstraint"><span class="hs-identifier hs-type">ColumnOrConstraint</span></a><span> </span><a href="#local-6989586621679337974"><span class="hs-identifier hs-type">d</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679337975"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-230"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#ColumnOrConstraintColumn"><span class="hs-identifier hs-var">ColumnOrConstraintColumn</span></a><span> </span><a name="local-6989586621679337976"><a href="#local-6989586621679337976"><span class="hs-identifier">c</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337976"><span class="hs-identifier hs-var">c</span></a><span>
</span><a name="line-231"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#ColumnOrConstraintConstraint"><span class="hs-identifier hs-var">ColumnOrConstraintConstraint</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-232"></a><span>
</span><a name="line-233"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#ColumnDefinition"><span class="hs-identifier hs-type">ColumnDefinition</span></a><span> </span><a href="#local-6989586621679337966"><span class="hs-identifier hs-type">d</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679337967"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-234"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><a href="Database.Sql.Type.html#ColumnDefinition"><span class="hs-identifier hs-var">ColumnDefinition</span></a><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337972"><span class="hs-identifier hs-var">columnDefinitionDefault</span></a><span>
</span><a name="line-235"></a><span>
</span><a name="line-236"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#Truncate"><span class="hs-identifier hs-type">Truncate</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679337964"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-237"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#Truncate"><span class="hs-identifier hs-var">Truncate</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337965"><a href="#local-6989586621679337965"><span class="hs-identifier">tn</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">local</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Sql.Util.Tables.html#WriteData"><span class="hs-identifier hs-var">WriteData</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337965"><span class="hs-identifier hs-var">tn</span></a><span>
</span><a name="line-238"></a><span>
</span><a name="line-239"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#AlterTable"><span class="hs-identifier hs-type">AlterTable</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679337959"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-240"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#AlterTableRenameTable"><span class="hs-identifier hs-var">AlterTableRenameTable</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337960"><a href="#local-6989586621679337960"><span class="hs-identifier">tl</span></a></a><span> </span><a name="local-6989586621679337961"><a href="#local-6989586621679337961"><span class="hs-identifier">tr</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-241"></a><span>      </span><span class="hs-comment">-- Since renaming table both reads and writes (drops) the source,</span><span>
</span><a name="line-242"></a><span>      </span><span class="hs-comment">-- we report twice.</span><span>
</span><a name="line-243"></a><span>      </span><span class="hs-identifier hs-var">local</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Sql.Util.Tables.html#ReadData"><span class="hs-identifier hs-var">ReadData</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337960"><span class="hs-identifier hs-var">tl</span></a><span>
</span><a name="line-244"></a><span>      </span><span class="hs-identifier hs-var">local</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Sql.Util.Tables.html#WriteData"><span class="hs-identifier hs-var">WriteData</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337960"><span class="hs-identifier hs-var">tl</span></a><span>
</span><a name="line-245"></a><span>      </span><span class="hs-identifier hs-var">local</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Sql.Util.Tables.html#WriteData"><span class="hs-identifier hs-var">WriteData</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337961"><span class="hs-identifier hs-var">tr</span></a><span>
</span><a name="line-246"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#AlterTableRenameColumn"><span class="hs-identifier hs-var">AlterTableRenameColumn</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337962"><a href="#local-6989586621679337962"><span class="hs-identifier">t</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-247"></a><span>      </span><span class="hs-identifier hs-var">local</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Sql.Util.Tables.html#WriteMeta"><span class="hs-identifier hs-var">WriteMeta</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337962"><span class="hs-identifier hs-var">t</span></a><span>
</span><a name="line-248"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#AlterTableAddColumns"><span class="hs-identifier hs-var">AlterTableAddColumns</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337963"><a href="#local-6989586621679337963"><span class="hs-identifier">t</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-249"></a><span>      </span><span class="hs-identifier hs-var">local</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Sql.Util.Tables.html#WriteData"><span class="hs-identifier hs-var">WriteData</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337963"><span class="hs-identifier hs-var">t</span></a><span>
</span><a name="line-250"></a><span>
</span><a name="line-251"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#DropTable"><span class="hs-identifier hs-type">DropTable</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679337956"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-252"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><a href="Database.Sql.Type.html#DropTable"><span class="hs-identifier hs-var">DropTable</span></a><span class="hs-special">{</span><span class="hs-identifier">dropTableNames</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621679337957"><a href="#local-6989586621679337957"><span class="hs-identifier">tables</span></a></a><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-253"></a><span>      </span><span class="hs-identifier hs-var">mapM_</span><span>
</span><a name="line-254"></a><span>      </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-keyword">case</span><span>
</span><a name="line-255"></a><span>          </span><a href="Database.Sql.Type.Scope.html#RDropExistingTableName"><span class="hs-identifier hs-var">RDropExistingTableName</span></a><span> </span><a name="local-6989586621679337958"><a href="#local-6989586621679337958"><span class="hs-identifier">table</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">local</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Sql.Util.Tables.html#WriteData"><span class="hs-identifier hs-var">WriteData</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Sql.Util.Tables.html#emitTable"><span class="hs-identifier hs-var">emitTable</span></a><span> </span><a href="#local-6989586621679337958"><span class="hs-identifier hs-var">table</span></a><span>
</span><a name="line-256"></a><span>          </span><a href="Database.Sql.Type.Scope.html#RDropMissingTableName"><span class="hs-identifier hs-var">RDropMissingTableName</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">pure</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-257"></a><span>      </span><span class="hs-special">)</span><span>
</span><a name="line-258"></a><span>      </span><a href="#local-6989586621679337957"><span class="hs-identifier hs-var">tables</span></a><span>
</span><a name="line-259"></a><span>
</span><a name="line-260"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#CreateView"><span class="hs-identifier hs-type">CreateView</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679337949"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-261"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><a href="Database.Sql.Type.html#CreateView"><span class="hs-identifier hs-var">CreateView</span></a><span class="hs-special">{</span><a name="local-6989586621679337951"><a href="#local-6989586621679337951"><span class="hs-identifier">createViewName</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Type.Scope.html#RCreateTableName"><span class="hs-identifier hs-var">RCreateTableName</span></a><span> </span><a name="local-6989586621679337950"><a href="#local-6989586621679337950"><span class="hs-identifier">view</span></a></a><span> </span><a name="local-6989586621679337951"><a href="#local-6989586621679337951"><span class="hs-identifier">_</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-glyph">..</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-262"></a><span>        </span><span class="hs-identifier hs-var">local</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Sql.Util.Tables.html#WriteMeta"><span class="hs-identifier hs-var">WriteMeta</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Sql.Util.Tables.html#emitTable"><span class="hs-identifier hs-var">emitTable</span></a><span> </span><a href="#local-6989586621679337950"><span class="hs-identifier hs-var">view</span></a><span>
</span><a name="line-263"></a><span>        </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337955"><span class="hs-identifier hs-var">createViewQuery</span></a><span>
</span><a name="line-264"></a><span>
</span><a name="line-265"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.html#DropView"><span class="hs-identifier hs-type">DropView</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679337947"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-266"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><a href="Database.Sql.Type.html#DropView"><span class="hs-identifier hs-var">DropView</span></a><span class="hs-special">{</span><span class="hs-identifier">dropViewName</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Type.Scope.html#RDropExistingTableName"><span class="hs-identifier hs-var">RDropExistingTableName</span></a><span> </span><a name="local-6989586621679337948"><a href="#local-6989586621679337948"><span class="hs-identifier">view</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">local</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Sql.Util.Tables.html#WriteMeta"><span class="hs-identifier hs-var">WriteMeta</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Sql.Util.Tables.html#emitTable"><span class="hs-identifier hs-var">emitTable</span></a><span> </span><a href="#local-6989586621679337948"><span class="hs-identifier hs-var">view</span></a><span>
</span><a name="line-267"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><a href="Database.Sql.Type.html#DropView"><span class="hs-identifier hs-var">DropView</span></a><span class="hs-special">{</span><span class="hs-identifier">dropViewName</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Type.Scope.html#RDropMissingTableName"><span class="hs-identifier hs-var">RDropMissingTableName</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">pure</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-268"></a><span>
</span><a name="line-269"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#Tablish"><span class="hs-identifier hs-type">Tablish</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679337935"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-270"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#TablishTable"><span class="hs-identifier hs-var">TablishTable</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Scope.html#RTableRef"><span class="hs-identifier hs-var">RTableRef</span></a><span> </span><a name="local-6989586621679337936"><a href="#local-6989586621679337936"><span class="hs-identifier">fqtn</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#emitTable"><span class="hs-identifier hs-var">emitTable</span></a><span> </span><a href="#local-6989586621679337936"><span class="hs-identifier hs-var">fqtn</span></a><span>
</span><a name="line-271"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#TablishTable"><span class="hs-identifier hs-var">TablishTable</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Scope.html#RTableAlias"><span class="hs-identifier hs-var">RTableAlias</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-272"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#TablishSubQuery"><span class="hs-identifier hs-var">TablishSubQuery</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337937"><a href="#local-6989586621679337937"><span class="hs-identifier">query</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337937"><span class="hs-identifier hs-var">query</span></a><span>
</span><a name="line-273"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#TablishLateralView"><span class="hs-identifier hs-var">TablishLateralView</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><a href="Database.Sql.Type.Query.html#LateralView"><span class="hs-identifier hs-var">LateralView</span></a><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span><span> </span><a name="local-6989586621679337942"><a href="#local-6989586621679337942"><span class="hs-identifier">lhs</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337942"><span class="hs-identifier hs-var">lhs</span></a><span> </span><span class="hs-operator hs-var">&gt;&gt;</span><span> </span><span class="hs-identifier hs-var">mapM_</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337940"><span class="hs-identifier hs-var">lateralViewExprs</span></a><span>
</span><a name="line-274"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#TablishJoin"><span class="hs-identifier hs-var">TablishJoin</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337943"><a href="#local-6989586621679337943"><span class="hs-identifier">cond</span></a></a><span> </span><a name="local-6989586621679337944"><a href="#local-6989586621679337944"><span class="hs-identifier">outer</span></a></a><span> </span><a name="local-6989586621679337945"><a href="#local-6989586621679337945"><span class="hs-identifier">inner</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-275"></a><span>        </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679337943"><span class="hs-identifier hs-var">cond</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-276"></a><span>            </span><a href="Database.Sql.Type.Query.html#JoinOn"><span class="hs-identifier hs-var">JoinOn</span></a><span> </span><a name="local-6989586621679337946"><a href="#local-6989586621679337946"><span class="hs-identifier">expr</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337946"><span class="hs-identifier hs-var">expr</span></a><span>
</span><a name="line-277"></a><span>            </span><a href="Database.Sql.Type.Query.html#JoinNatural"><span class="hs-identifier hs-var">JoinNatural</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-278"></a><span>            </span><a href="Database.Sql.Type.Query.html#JoinUsing"><span class="hs-identifier hs-var">JoinUsing</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-279"></a><span>
</span><a name="line-280"></a><span>        </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337944"><span class="hs-identifier hs-var">outer</span></a><span>
</span><a name="line-281"></a><span>        </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337945"><span class="hs-identifier hs-var">inner</span></a><span>
</span><a name="line-282"></a><span>
</span><a name="line-283"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#Expr"><span class="hs-identifier hs-type">Expr</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679337898"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-284"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#BinOpExpr"><span class="hs-identifier hs-var">BinOpExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337899"><a href="#local-6989586621679337899"><span class="hs-identifier">lhs</span></a></a><span> </span><a name="local-6989586621679337900"><a href="#local-6989586621679337900"><span class="hs-identifier">rhs</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mapM_</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><span class="hs-special">[</span><a href="#local-6989586621679337899"><span class="hs-identifier hs-var">lhs</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679337900"><span class="hs-identifier hs-var">rhs</span></a><span class="hs-special">]</span><span>
</span><a name="line-285"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#CaseExpr"><span class="hs-identifier hs-var">CaseExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337901"><a href="#local-6989586621679337901"><span class="hs-identifier">whens</span></a></a><span> </span><a name="local-6989586621679337902"><a href="#local-6989586621679337902"><span class="hs-identifier">else_</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-286"></a><span>        </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679337903"><a href="#local-6989586621679337903"><span class="hs-identifier">whens'</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">foldl'</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><a name="local-6989586621679337904"><a href="#local-6989586621679337904"><span class="hs-identifier">xs</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621679337905"><a href="#local-6989586621679337905"><span class="hs-identifier">x</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679337906"><a href="#local-6989586621679337906"><span class="hs-identifier">y</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679337905"><span class="hs-identifier hs-var">x</span></a><span class="hs-glyph">:</span><a href="#local-6989586621679337906"><span class="hs-identifier hs-var">y</span></a><span class="hs-glyph">:</span><a href="#local-6989586621679337904"><span class="hs-identifier hs-var">xs</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><a href="#local-6989586621679337901"><span class="hs-identifier hs-var">whens</span></a><span>
</span><a name="line-287"></a><span>         </span><span class="hs-keyword">in</span><span> </span><span class="hs-identifier hs-var">mapM_</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">maybe</span><span> </span><span class="hs-identifier hs-var">id</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">:</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679337902"><span class="hs-identifier hs-var">else_</span></a><span> </span><a href="#local-6989586621679337903"><span class="hs-identifier hs-var">whens'</span></a><span class="hs-special">)</span><span>
</span><a name="line-288"></a><span>
</span><a name="line-289"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#UnOpExpr"><span class="hs-identifier hs-var">UnOpExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337907"><a href="#local-6989586621679337907"><span class="hs-identifier">operand</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337907"><span class="hs-identifier hs-var">operand</span></a><span>
</span><a name="line-290"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#LikeExpr"><span class="hs-identifier hs-var">LikeExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337908"><a href="#local-6989586621679337908"><span class="hs-identifier">escape</span></a></a><span> </span><a name="local-6989586621679337909"><a href="#local-6989586621679337909"><span class="hs-identifier">pattern</span></a></a><span> </span><a name="local-6989586621679337910"><a href="#local-6989586621679337910"><span class="hs-identifier">expr</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mapM_</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">catMaybes</span><span>
</span><a name="line-291"></a><span>        </span><span class="hs-special">[</span><span> </span><span class="hs-identifier hs-var">fmap</span><span> </span><span class="hs-identifier">escapeExpr</span><span> </span><a href="#local-6989586621679337908"><span class="hs-identifier hs-var">escape</span></a><span>
</span><a name="line-292"></a><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">patternExpr</span><span> </span><a href="#local-6989586621679337909"><span class="hs-identifier hs-var">pattern</span></a><span class="hs-special">)</span><span>
</span><a name="line-293"></a><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><a href="#local-6989586621679337910"><span class="hs-identifier hs-var">expr</span></a><span>
</span><a name="line-294"></a><span>        </span><span class="hs-special">]</span><span>
</span><a name="line-295"></a><span>
</span><a name="line-296"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#ConstantExpr"><span class="hs-identifier hs-var">ConstantExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-297"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#ColumnExpr"><span class="hs-identifier hs-var">ColumnExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-298"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#InListExpr"><span class="hs-identifier hs-var">InListExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337911"><a href="#local-6989586621679337911"><span class="hs-identifier">exprs</span></a></a><span> </span><a name="local-6989586621679337912"><a href="#local-6989586621679337912"><span class="hs-identifier">expr</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mapM_</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679337912"><span class="hs-identifier hs-var">expr</span></a><span> </span><span class="hs-glyph">:</span><span> </span><a href="#local-6989586621679337911"><span class="hs-identifier hs-var">exprs</span></a><span>
</span><a name="line-299"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#InSubqueryExpr"><span class="hs-identifier hs-var">InSubqueryExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337913"><a href="#local-6989586621679337913"><span class="hs-identifier">query</span></a></a><span> </span><a name="local-6989586621679337914"><a href="#local-6989586621679337914"><span class="hs-identifier">expr</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-300"></a><span>        </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337914"><span class="hs-identifier hs-var">expr</span></a><span>
</span><a name="line-301"></a><span>        </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337913"><span class="hs-identifier hs-var">query</span></a><span>
</span><a name="line-302"></a><span>
</span><a name="line-303"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#BetweenExpr"><span class="hs-identifier hs-var">BetweenExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337915"><a href="#local-6989586621679337915"><span class="hs-identifier">expr</span></a></a><span> </span><a name="local-6989586621679337916"><a href="#local-6989586621679337916"><span class="hs-identifier">start</span></a></a><span> </span><a name="local-6989586621679337917"><a href="#local-6989586621679337917"><span class="hs-identifier">end</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-304"></a><span>        </span><span class="hs-identifier hs-var">mapM_</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><span class="hs-special">[</span><a href="#local-6989586621679337915"><span class="hs-identifier hs-var">expr</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679337916"><span class="hs-identifier hs-var">start</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679337917"><span class="hs-identifier hs-var">end</span></a><span class="hs-special">]</span><span>
</span><a name="line-305"></a><span>
</span><a name="line-306"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#OverlapsExpr"><span class="hs-identifier hs-var">OverlapsExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679337918"><a href="#local-6989586621679337918"><span class="hs-identifier">s1</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679337919"><a href="#local-6989586621679337919"><span class="hs-identifier">e1</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679337920"><a href="#local-6989586621679337920"><span class="hs-identifier">s2</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679337921"><a href="#local-6989586621679337921"><span class="hs-identifier">e2</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-307"></a><span>        </span><span class="hs-identifier hs-var">mapM_</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><span class="hs-special">[</span><a href="#local-6989586621679337918"><span class="hs-identifier hs-var">s1</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679337919"><span class="hs-identifier hs-var">e1</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679337920"><span class="hs-identifier hs-var">s2</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679337921"><span class="hs-identifier hs-var">e2</span></a><span class="hs-special">]</span><span>
</span><a name="line-308"></a><span>
</span><a name="line-309"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#FunctionExpr"><span class="hs-identifier hs-var">FunctionExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337922"><a href="#local-6989586621679337922"><span class="hs-identifier">args</span></a></a><span> </span><a name="local-6989586621679337923"><a href="#local-6989586621679337923"><span class="hs-identifier">params</span></a></a><span> </span><a name="local-6989586621679337924"><a href="#local-6989586621679337924"><span class="hs-identifier">mFilter</span></a></a><span> </span><a name="local-6989586621679337925"><a href="#local-6989586621679337925"><span class="hs-identifier">mOver</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-310"></a><span>        </span><span class="hs-identifier hs-var">mapM_</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679337922"><span class="hs-identifier hs-var">args</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-identifier hs-var">snd</span><span> </span><a href="#local-6989586621679337923"><span class="hs-identifier hs-var">params</span></a><span>
</span><a name="line-311"></a><span>        </span><span class="hs-identifier hs-var">maybe</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337924"><span class="hs-identifier hs-var">mFilter</span></a><span>
</span><a name="line-312"></a><span>        </span><span class="hs-identifier hs-var">maybe</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337925"><span class="hs-identifier hs-var">mOver</span></a><span>
</span><a name="line-313"></a><span>
</span><a name="line-314"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#AtTimeZoneExpr"><span class="hs-identifier hs-var">AtTimeZoneExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337926"><a href="#local-6989586621679337926"><span class="hs-identifier">expr</span></a></a><span> </span><a name="local-6989586621679337927"><a href="#local-6989586621679337927"><span class="hs-identifier">tz</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mapM_</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><span class="hs-special">[</span><a href="#local-6989586621679337926"><span class="hs-identifier hs-var">expr</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679337927"><span class="hs-identifier hs-var">tz</span></a><span class="hs-special">]</span><span>
</span><a name="line-315"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#SubqueryExpr"><span class="hs-identifier hs-var">SubqueryExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337928"><a href="#local-6989586621679337928"><span class="hs-identifier">query</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337928"><span class="hs-identifier hs-var">query</span></a><span>
</span><a name="line-316"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#ArrayExpr"><span class="hs-identifier hs-var">ArrayExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337929"><a href="#local-6989586621679337929"><span class="hs-identifier">values</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mapM_</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337929"><span class="hs-identifier hs-var">values</span></a><span>
</span><a name="line-317"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#ExistsExpr"><span class="hs-identifier hs-var">ExistsExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337930"><a href="#local-6989586621679337930"><span class="hs-identifier">query</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337930"><span class="hs-identifier hs-var">query</span></a><span>
</span><a name="line-318"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#FieldAccessExpr"><span class="hs-identifier hs-var">FieldAccessExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337931"><a href="#local-6989586621679337931"><span class="hs-identifier">expr</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337931"><span class="hs-identifier hs-var">expr</span></a><span>
</span><a name="line-319"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#ArrayAccessExpr"><span class="hs-identifier hs-var">ArrayAccessExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337932"><a href="#local-6989586621679337932"><span class="hs-identifier">expr</span></a></a><span> </span><a name="local-6989586621679337933"><a href="#local-6989586621679337933"><span class="hs-identifier">subscript</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-320"></a><span>        </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337932"><span class="hs-identifier hs-var">expr</span></a><span>
</span><a name="line-321"></a><span>        </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337933"><span class="hs-identifier hs-var">subscript</span></a><span>
</span><a name="line-322"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#TypeCastExpr"><span class="hs-identifier hs-var">TypeCastExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337934"><a href="#local-6989586621679337934"><span class="hs-identifier">expr</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337934"><span class="hs-identifier hs-var">expr</span></a><span>
</span><a name="line-323"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#VariableSubstitutionExpr"><span class="hs-identifier hs-var">VariableSubstitutionExpr</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-324"></a><span>
</span><a name="line-325"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#Filter"><span class="hs-identifier hs-type">Filter</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679337896"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-326"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#Filter"><span class="hs-identifier hs-var">Filter</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337897"><a href="#local-6989586621679337897"><span class="hs-identifier">expr</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337897"><span class="hs-identifier hs-var">expr</span></a><span>
</span><a name="line-327"></a><span>
</span><a name="line-328"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#OverSubExpr"><span class="hs-identifier hs-type">OverSubExpr</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679337893"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-329"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#OverWindowExpr"><span class="hs-identifier hs-var">OverWindowExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337894"><a href="#local-6989586621679337894"><span class="hs-identifier">windowExpr</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337894"><span class="hs-identifier hs-var">windowExpr</span></a><span>
</span><a name="line-330"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#OverWindowName"><span class="hs-identifier hs-var">OverWindowName</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-331"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#OverPartialWindowExpr"><span class="hs-identifier hs-var">OverPartialWindowExpr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337895"><a href="#local-6989586621679337895"><span class="hs-identifier">partial</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337895"><span class="hs-identifier hs-var">partial</span></a><span>
</span><a name="line-332"></a><span>
</span><a name="line-333"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#Partition"><span class="hs-identifier hs-type">Partition</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679337891"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-334"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#PartitionBy"><span class="hs-identifier hs-var">PartitionBy</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337892"><a href="#local-6989586621679337892"><span class="hs-identifier">exprs</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mapM_</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337892"><span class="hs-identifier hs-var">exprs</span></a><span>
</span><a name="line-335"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#PartitionBest"><span class="hs-identifier hs-var">PartitionBest</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-336"></a><span>    </span><span class="hs-identifier">goTables</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#PartitionNodes"><span class="hs-identifier hs-var">PartitionNodes</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-337"></a><span>
</span><a name="line-338"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#HasTables"><span class="hs-identifier hs-type">HasTables</span></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#Order"><span class="hs-identifier hs-type">Order</span></a><span> </span><a href="Database.Sql.Type.Scope.html#ResolvedNames"><span class="hs-identifier hs-type">ResolvedNames</span></a><span> </span><a href="#local-6989586621679337889"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-339"></a><span>    </span><a name="local-8214565720324112784"><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier">goTables</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Sql.Type.Query.html#Order"><span class="hs-identifier hs-var">Order</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679337890"><a href="#local-6989586621679337890"><span class="hs-identifier">posOrExpr</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Sql.Util.Tables.html#goTables"><span class="hs-identifier hs-var">goTables</span></a><span> </span><a href="#local-6989586621679337890"><span class="hs-identifier hs-var">posOrExpr</span></a><span>
</span><a name="line-340"></a><span>
</span><a name="line-341"></a><span>
</span><a name="line-342"></a><span class="hs-keyword">data</span><span> </span><a name="Open"><a href="Database.Sql.Util.Tables.html#Open"><span class="hs-identifier">Open</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="Open"><a href="Database.Sql.Util.Tables.html#Open"><span class="hs-identifier">Open</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="openRange"><a href="Database.Sql.Util.Tables.html#openRange"><span class="hs-identifier">openRange</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Sql.Position.html#Range"><span class="hs-identifier hs-type">Range</span></a><span>
</span><a name="line-343"></a><span>                 </span><span class="hs-special">,</span><span> </span><a name="openNumber"><a href="Database.Sql.Util.Tables.html#openNumber"><span class="hs-identifier">openNumber</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Sql.Util.Tables.html#RangeNumber"><span class="hs-identifier hs-type">RangeNumber</span></a><span>
</span><a name="line-344"></a><span>                 </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Show</span><span class="hs-special">)</span><span>
</span><a name="line-345"></a><span>
</span><a name="line-346"></a><span class="hs-keyword">data</span><span> </span><a name="Close"><a href="Database.Sql.Util.Tables.html#Close"><span class="hs-identifier">Close</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="Close"><a href="Database.Sql.Util.Tables.html#Close"><span class="hs-identifier">Close</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="closeRange"><a href="Database.Sql.Util.Tables.html#closeRange"><span class="hs-identifier">closeRange</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Sql.Position.html#Range"><span class="hs-identifier hs-type">Range</span></a><span>
</span><a name="line-347"></a><span>                   </span><span class="hs-special">,</span><span> </span><a name="closeNumber"><a href="Database.Sql.Util.Tables.html#closeNumber"><span class="hs-identifier">closeNumber</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Sql.Util.Tables.html#RangeNumber"><span class="hs-identifier hs-type">RangeNumber</span></a><span>
</span><a name="line-348"></a><span>                   </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Show</span><span class="hs-special">)</span><span>
</span><a name="line-349"></a><span>
</span><a name="line-350"></a><span class="hs-keyword">class</span><span> </span><a name="Positioned"><a href="Database.Sql.Util.Tables.html#Positioned"><span class="hs-identifier">Positioned</span></a></a><span> </span><a name="local-6989586621679337887"><a href="#local-6989586621679337887"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-351"></a><span>    </span><span class="hs-identifier">position</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679337887"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Sql.Position.html#Position"><span class="hs-identifier hs-type">Position</span></a><span>
</span><a name="line-352"></a><span>
</span><a name="line-353"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Ord</span><span> </span><a href="Database.Sql.Util.Tables.html#Open"><span class="hs-identifier hs-type">Open</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-354"></a><span>    </span><a name="local-8214565720323792005"><span class="hs-identifier">compare</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">comparing</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">start</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier">openRange</span><span class="hs-special">)</span><span>
</span><a name="line-355"></a><span>                </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier hs-var">flip</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">comparing</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">end</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier">openRange</span><span class="hs-special">)</span><span>
</span><a name="line-356"></a><span>
</span><a name="line-357"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#Positioned"><span class="hs-identifier hs-type">Positioned</span></a><span> </span><a href="Database.Sql.Util.Tables.html#Open"><span class="hs-identifier hs-type">Open</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-358"></a><span>    </span><a name="local-8214565720324112774"><a href="Database.Sql.Util.Tables.html#position"><span class="hs-identifier">position</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">start</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier">openRange</span><span>
</span><a name="line-359"></a><span>
</span><a name="line-360"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Ord</span><span> </span><a href="Database.Sql.Util.Tables.html#Close"><span class="hs-identifier hs-type">Close</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-361"></a><span>    </span><a name="local-8214565720323792005"><span class="hs-identifier">compare</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">comparing</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">end</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier">closeRange</span><span class="hs-special">)</span><span>
</span><a name="line-362"></a><span>                </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier hs-var">flip</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">comparing</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">start</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier">closeRange</span><span class="hs-special">)</span><span>
</span><a name="line-363"></a><span>
</span><a name="line-364"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Sql.Util.Tables.html#Positioned"><span class="hs-identifier hs-type">Positioned</span></a><span> </span><a href="Database.Sql.Util.Tables.html#Close"><span class="hs-identifier hs-type">Close</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-365"></a><span>    </span><a name="local-8214565720324112774"><a href="Database.Sql.Util.Tables.html#position"><span class="hs-identifier">position</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">end</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier">closeRange</span><span>
</span><a name="line-366"></a><span>
</span><a name="line-367"></a><span>
</span><a name="line-368"></a><span class="hs-keyword">newtype</span><span> </span><a name="RangeNumber"><a href="Database.Sql.Util.Tables.html#RangeNumber"><span class="hs-identifier">RangeNumber</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="RangeNumber"><a href="Database.Sql.Util.Tables.html#RangeNumber"><span class="hs-identifier">RangeNumber</span></a></a><span> </span><span class="hs-identifier hs-type">Integer</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Ord</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Show</span><span class="hs-special">)</span><span>
</span><a name="line-369"></a><span class="hs-keyword">newtype</span><span> </span><a name="NodeNumber"><a href="Database.Sql.Util.Tables.html#NodeNumber"><span class="hs-identifier">NodeNumber</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="NodeNumber"><a href="Database.Sql.Util.Tables.html#NodeNumber"><span class="hs-identifier">NodeNumber</span></a></a><span> </span><span class="hs-identifier hs-type">Integer</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Ord</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Show</span><span class="hs-special">)</span><span>
</span><a name="line-370"></a><span>
</span><a name="line-371"></a><span class="hs-identifier">getRanges</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Sql.Type.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a><span> </span><a href="Database.Sql.Type.Scope.html#RawNames"><span class="hs-identifier hs-type">RawNames</span></a><span> </span><a href="Database.Sql.Position.html#Range"><span class="hs-identifier hs-type">Range</span></a><span>
</span><a name="line-372"></a><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span> </span><a href="Database.Sql.Type.Query.html#Query"><span class="hs-identifier hs-type">Query</span></a><span> </span><a href="Database.Sql.Type.Scope.html#RawNames"><span class="hs-identifier hs-type">RawNames</span></a><span> </span><a href="Database.Sql.Util.Tables.html#NodeNumber"><span class="hs-identifier hs-type">NodeNumber</span></a><span>
</span><a name="line-373"></a><span>           </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Set</span><span> </span><a href="Database.Sql.Util.Tables.html#Open"><span class="hs-identifier hs-type">Open</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Set</span><span> </span><a href="Database.Sql.Util.Tables.html#Close"><span class="hs-identifier hs-type">Close</span></a><span>
</span><a name="line-374"></a><span>           </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Map</span><span> </span><a href="Database.Sql.Util.Tables.html#NodeNumber"><span class="hs-identifier hs-type">NodeNumber</span></a><span> </span><a href="Database.Sql.Util.Tables.html#RangeNumber"><span class="hs-identifier hs-type">RangeNumber</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-375"></a><a name="getRanges"><a href="Database.Sql.Util.Tables.html#getRanges"><span class="hs-identifier">getRanges</span></a></a><span> </span><a name="local-6989586621679338103"><a href="#local-6989586621679338103"><span class="hs-identifier">query</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-376"></a><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679338236"><a href="#local-6989586621679338236"><span class="hs-identifier">query'</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><a name="local-6989586621679338237"><a href="#local-6989586621679338237"><span class="hs-identifier">m</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">runState</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">mapM</span><span> </span><a href="#local-6989586621679338104"><span class="hs-identifier hs-var">numberNodes</span></a><span> </span><a href="#local-6989586621679338103"><span class="hs-identifier hs-var">query</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-number">0</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">M</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">empty</span><span class="hs-special">)</span><span>
</span><a name="line-377"></a><span>        </span><span class="hs-special">(</span><a name="local-6989586621679338238"><a href="#local-6989586621679338238"><span class="hs-identifier">ranges</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><a name="local-6989586621679338239"><a href="#local-6989586621679338239"><span class="hs-identifier">mapping</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-378"></a><span>            </span><span class="hs-identifier hs-var">runState</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">mapM</span><span> </span><a href="#local-6989586621679338105"><span class="hs-identifier hs-var">numberRanges</span></a><span> </span><a href="#local-6989586621679338237"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-number">0</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">M</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">empty</span><span class="hs-special">)</span><span>
</span><a name="line-379"></a><span>
</span><a name="line-380"></a><span>        </span><span class="hs-special">(</span><a name="local-6989586621679338240"><a href="#local-6989586621679338240"><span class="hs-identifier">opens</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679338241"><a href="#local-6989586621679338241"><span class="hs-identifier">closes</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-381"></a><span>            </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679338242"><a href="#local-6989586621679338242"><span class="hs-identifier">makeOpenAndClose</span></a></a><span> </span><a name="local-6989586621679338243"><a href="#local-6989586621679338243"><span class="hs-identifier">r</span></a></a><span> </span><a name="local-6989586621679338244"><a href="#local-6989586621679338244"><span class="hs-identifier">rnum</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-382"></a><span>                    </span><span class="hs-special">(</span><span> </span><span class="hs-identifier hs-var">S</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">singleton</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Util.Tables.html#Open"><span class="hs-identifier hs-var">Open</span></a><span> </span><a href="#local-6989586621679338243"><span class="hs-identifier hs-var">r</span></a><span> </span><a href="#local-6989586621679338244"><span class="hs-identifier hs-var">rnum</span></a><span class="hs-special">)</span><span>
</span><a name="line-383"></a><span>                    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">S</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">singleton</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Util.Tables.html#Close"><span class="hs-identifier hs-var">Close</span></a><span> </span><a href="#local-6989586621679338243"><span class="hs-identifier hs-var">r</span></a><span> </span><a href="#local-6989586621679338244"><span class="hs-identifier hs-var">rnum</span></a><span class="hs-special">)</span><span>
</span><a name="line-384"></a><span>                    </span><span class="hs-special">)</span><span>
</span><a name="line-385"></a><span>             </span><span class="hs-keyword">in</span><span> </span><span class="hs-identifier hs-var">M</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">foldMapWithKey</span><span> </span><a href="#local-6989586621679338242"><span class="hs-identifier hs-var">makeOpenAndClose</span></a><span> </span><a href="#local-6989586621679338238"><span class="hs-identifier hs-var">ranges</span></a><span>
</span><a name="line-386"></a><span>
</span><a name="line-387"></a><span>     </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679338236"><span class="hs-identifier hs-var">query'</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679338240"><span class="hs-identifier hs-var">opens</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679338241"><span class="hs-identifier hs-var">closes</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679338239"><span class="hs-identifier hs-var">mapping</span></a><span class="hs-special">)</span><span>
</span><a name="line-388"></a><span>
</span><a name="line-389"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-390"></a><span>    </span><a name="local-6989586621679338104"><a href="#local-6989586621679338104"><span class="hs-identifier">numberNodes</span></a></a><span> </span><a name="local-6989586621679338106"><a href="#local-6989586621679338106"><span class="hs-identifier">r</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">state</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679338229"><a href="#local-6989586621679338229"><span class="hs-identifier">i</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679338230"><a href="#local-6989586621679338230"><span class="hs-identifier">m</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-391"></a><span>        </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679338231"><a href="#local-6989586621679338231"><span class="hs-identifier">m'</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">M</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">insertWith</span><span> </span><span class="hs-identifier hs-var">S</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">union</span><span> </span><a href="#local-6989586621679338106"><span class="hs-identifier hs-var">r</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">S</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">singleton</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Sql.Util.Tables.html#NodeNumber"><span class="hs-identifier hs-var">NodeNumber</span></a><span> </span><a href="#local-6989586621679338229"><span class="hs-identifier hs-var">i</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679338230"><span class="hs-identifier hs-var">m</span></a><span>
</span><a name="line-392"></a><span>         </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Util.Tables.html#NodeNumber"><span class="hs-identifier hs-var">NodeNumber</span></a><span> </span><a href="#local-6989586621679338229"><span class="hs-identifier hs-var">i</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679338229"><span class="hs-identifier hs-var">i</span></a><span class="hs-operator hs-var">+</span><span class="hs-number">1</span><span class="hs-special">,</span><span> </span><a href="#local-6989586621679338231"><span class="hs-identifier hs-var">m'</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-393"></a><span>
</span><a name="line-394"></a><span>    </span><a name="local-6989586621679338105"><a href="#local-6989586621679338105"><span class="hs-identifier">numberRanges</span></a></a><span> </span><a name="local-6989586621679338232"><a href="#local-6989586621679338232"><span class="hs-identifier">s</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">state</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679338233"><a href="#local-6989586621679338233"><span class="hs-identifier">i</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679338234"><a href="#local-6989586621679338234"><span class="hs-identifier">m</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-395"></a><span>        </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679338235"><a href="#local-6989586621679338235"><span class="hs-identifier">m'</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">M</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">union</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">M</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">fromSet</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">const</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Sql.Util.Tables.html#RangeNumber"><span class="hs-identifier hs-var">RangeNumber</span></a><span> </span><a href="#local-6989586621679338233"><span class="hs-identifier hs-var">i</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679338232"><span class="hs-identifier hs-var">s</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679338234"><span class="hs-identifier hs-var">m</span></a><span>
</span><a name="line-396"></a><span>         </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Util.Tables.html#RangeNumber"><span class="hs-identifier hs-var">RangeNumber</span></a><span> </span><a href="#local-6989586621679338233"><span class="hs-identifier hs-var">i</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679338233"><span class="hs-identifier hs-var">i</span></a><span class="hs-operator hs-var">+</span><span class="hs-number">1</span><span class="hs-special">,</span><span> </span><a href="#local-6989586621679338235"><span class="hs-identifier hs-var">m'</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-397"></a><span>
</span><a name="line-398"></a><span>
</span><a name="line-399"></a><span class="hs-identifier">spliceMarkers</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monoid</span><span> </span><a href="#local-6989586621679338094"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Util.Tables.html#Open"><span class="hs-identifier hs-type">Open</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679338094"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-400"></a><span>                          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Util.Tables.html#Close"><span class="hs-identifier hs-type">Close</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679338094"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-401"></a><span>                          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Text</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679338094"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-402"></a><span>                          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Set</span><span> </span><a href="Database.Sql.Util.Tables.html#Open"><span class="hs-identifier hs-type">Open</span></a><span>
</span><a name="line-403"></a><span>                          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Set</span><span> </span><a href="Database.Sql.Util.Tables.html#Close"><span class="hs-identifier hs-type">Close</span></a><span>
</span><a name="line-404"></a><span>                          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Text</span><span>
</span><a name="line-405"></a><span>                          </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679338094"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-406"></a><span>
</span><a name="line-407"></a><a name="spliceMarkers"><a href="Database.Sql.Util.Tables.html#spliceMarkers"><span class="hs-identifier">spliceMarkers</span></a></a><span> </span><a name="local-6989586621679338245"><a href="#local-6989586621679338245"><span class="hs-identifier">renderOpen</span></a></a><span> </span><a name="local-6989586621679338246"><a href="#local-6989586621679338246"><span class="hs-identifier">renderClose</span></a></a><span> </span><a name="local-6989586621679338247"><a href="#local-6989586621679338247"><span class="hs-identifier">renderText</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679338248"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-number">0</span><span>
</span><a name="line-408"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-409"></a><span>    </span><a name="local-6989586621679338248"><a href="#local-6989586621679338248"><span class="hs-identifier">go</span></a></a><span> </span><a name="local-6989586621679338249"><a href="#local-6989586621679338249"><span class="hs-identifier">offset</span></a></a><span> </span><a name="local-6989586621679338250"><a href="#local-6989586621679338250"><span class="hs-identifier">opens</span></a></a><span> </span><a name="local-6989586621679338251"><a href="#local-6989586621679338251"><span class="hs-identifier">closes</span></a></a><span> </span><a name="local-6989586621679338252"><a href="#local-6989586621679338252"><span class="hs-identifier">text</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-410"></a><span>        </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">S</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">minView</span><span> </span><a href="#local-6989586621679338250"><span class="hs-identifier hs-var">opens</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">S</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">minView</span><span> </span><a href="#local-6989586621679338251"><span class="hs-identifier hs-var">closes</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-411"></a><span>            </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679338253"><a href="#local-6989586621679338253"><span class="hs-identifier">o</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679338254"><a href="#local-6989586621679338254"><span class="hs-identifier">opens'</span></a></a><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679338255"><a href="#local-6989586621679338255"><span class="hs-identifier">c</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679338256"><a href="#local-6989586621679338256"><span class="hs-identifier">closes'</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-412"></a><span>                </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621679338249"><span class="hs-identifier hs-var">offset</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><span class="hs-identifier">positionOffset</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Util.Tables.html#position"><span class="hs-identifier hs-var">position</span></a><span> </span><a href="#local-6989586621679338255"><span class="hs-identifier hs-var">c</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-413"></a><span>                    </span><a href="#local-6989586621679338246"><span class="hs-identifier hs-var">renderClose</span></a><span> </span><a href="#local-6989586621679338255"><span class="hs-identifier hs-var">c</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="#local-6989586621679338248"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679338249"><span class="hs-identifier hs-var">offset</span></a><span> </span><a href="#local-6989586621679338250"><span class="hs-identifier hs-var">opens</span></a><span> </span><a href="#local-6989586621679338256"><span class="hs-identifier hs-var">closes'</span></a><span> </span><a href="#local-6989586621679338252"><span class="hs-identifier hs-var">text</span></a><span>
</span><a name="line-414"></a><span>
</span><a name="line-415"></a><span>                </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621679338249"><span class="hs-identifier hs-var">offset</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><span class="hs-identifier">positionOffset</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Util.Tables.html#position"><span class="hs-identifier hs-var">position</span></a><span> </span><a href="#local-6989586621679338253"><span class="hs-identifier hs-var">o</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-416"></a><span>                    </span><a href="#local-6989586621679338245"><span class="hs-identifier hs-var">renderOpen</span></a><span> </span><a href="#local-6989586621679338253"><span class="hs-identifier hs-var">o</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="#local-6989586621679338248"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679338249"><span class="hs-identifier hs-var">offset</span></a><span> </span><a href="#local-6989586621679338254"><span class="hs-identifier hs-var">opens'</span></a><span> </span><a href="#local-6989586621679338251"><span class="hs-identifier hs-var">closes</span></a><span> </span><a href="#local-6989586621679338252"><span class="hs-identifier hs-var">text</span></a><span>
</span><a name="line-417"></a><span>
</span><a name="line-418"></a><span>                </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">otherwise</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-419"></a><span>                    </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679338257"><a href="#local-6989586621679338257"><span class="hs-identifier">offset'</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">min</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">positionOffset</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Sql.Util.Tables.html#position"><span class="hs-identifier hs-var">position</span></a><span> </span><a href="#local-6989586621679338255"><span class="hs-identifier hs-var">c</span></a><span class="hs-special">)</span><span>
</span><a name="line-420"></a><span>                                      </span><span class="hs-special">(</span><span class="hs-identifier">positionOffset</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Sql.Util.Tables.html#position"><span class="hs-identifier hs-var">position</span></a><span> </span><a href="#local-6989586621679338253"><span class="hs-identifier hs-var">o</span></a><span class="hs-special">)</span><span>
</span><a name="line-421"></a><span>                        </span><span class="hs-special">(</span><a name="local-6989586621679338258"><a href="#local-6989586621679338258"><span class="hs-identifier">chunk</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679338259"><a href="#local-6989586621679338259"><span class="hs-identifier">rest</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">TL</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">splitAt</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679338257"><span class="hs-identifier hs-var">offset'</span></a><span> </span><span class="hs-glyph">-</span><span> </span><a href="#local-6989586621679338249"><span class="hs-identifier hs-var">offset</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679338252"><span class="hs-identifier hs-var">text</span></a><span>
</span><a name="line-422"></a><span>                     </span><span class="hs-keyword">in</span><span> </span><a href="#local-6989586621679338247"><span class="hs-identifier hs-var">renderText</span></a><span> </span><a href="#local-6989586621679338258"><span class="hs-identifier hs-var">chunk</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="#local-6989586621679338248"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679338257"><span class="hs-identifier hs-var">offset'</span></a><span> </span><a href="#local-6989586621679338250"><span class="hs-identifier hs-var">opens</span></a><span> </span><a href="#local-6989586621679338251"><span class="hs-identifier hs-var">closes</span></a><span> </span><a href="#local-6989586621679338259"><span class="hs-identifier hs-var">rest</span></a><span>
</span><a name="line-423"></a><span>
</span><a name="line-424"></a><span>            </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">error</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">unwords</span><span>
</span><a name="line-425"></a><span>                </span><span class="hs-special">[</span><span> </span><span class="hs-string">&quot;remaining opens when all closes are exhausted&quot;</span><span>
</span><a name="line-426"></a><span>                </span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;- this should not be possible&quot;</span><span>
</span><a name="line-427"></a><span>                </span><span class="hs-special">]</span><span>
</span><a name="line-428"></a><span>
</span><a name="line-429"></a><span>            </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Nothing</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679338260"><a href="#local-6989586621679338260"><span class="hs-identifier">c</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679338261"><a href="#local-6989586621679338261"><span class="hs-identifier">closes'</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-430"></a><span>                </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621679338249"><span class="hs-identifier hs-var">offset</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><span class="hs-identifier">positionOffset</span><span> </span><span class="hs-special">(</span><a href="Database.Sql.Util.Tables.html#position"><span class="hs-identifier hs-var">position</span></a><span> </span><a href="#local-6989586621679338260"><span class="hs-identifier hs-var">c</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-431"></a><span>                    </span><a href="#local-6989586621679338246"><span class="hs-identifier hs-var">renderClose</span></a><span> </span><a href="#local-6989586621679338260"><span class="hs-identifier hs-var">c</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="#local-6989586621679338248"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679338249"><span class="hs-identifier hs-var">offset</span></a><span> </span><a href="#local-6989586621679338250"><span class="hs-identifier hs-var">opens</span></a><span> </span><a href="#local-6989586621679338261"><span class="hs-identifier hs-var">closes'</span></a><span> </span><a href="#local-6989586621679338252"><span class="hs-identifier hs-var">text</span></a><span>
</span><a name="line-432"></a><span>
</span><a name="line-433"></a><span>                </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">otherwise</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-434"></a><span>                    </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679338262"><a href="#local-6989586621679338262"><span class="hs-identifier">offset'</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">positionOffset</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Sql.Util.Tables.html#position"><span class="hs-identifier hs-var">position</span></a><span> </span><a href="#local-6989586621679338260"><span class="hs-identifier hs-var">c</span></a><span>
</span><a name="line-435"></a><span>                        </span><span class="hs-special">(</span><a name="local-6989586621679338263"><a href="#local-6989586621679338263"><span class="hs-identifier">chunk</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679338264"><a href="#local-6989586621679338264"><span class="hs-identifier">rest</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">TL</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">splitAt</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679338262"><span class="hs-identifier hs-var">offset'</span></a><span> </span><span class="hs-glyph">-</span><span> </span><a href="#local-6989586621679338249"><span class="hs-identifier hs-var">offset</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679338252"><span class="hs-identifier hs-var">text</span></a><span>
</span><a name="line-436"></a><span>                     </span><span class="hs-keyword">in</span><span> </span><a href="#local-6989586621679338247"><span class="hs-identifier hs-var">renderText</span></a><span> </span><a href="#local-6989586621679338263"><span class="hs-identifier hs-var">chunk</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="#local-6989586621679338248"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679338262"><span class="hs-identifier hs-var">offset'</span></a><span> </span><a href="#local-6989586621679338250"><span class="hs-identifier hs-var">opens</span></a><span> </span><a href="#local-6989586621679338251"><span class="hs-identifier hs-var">closes</span></a><span> </span><a href="#local-6989586621679338264"><span class="hs-identifier hs-var">rest</span></a><span>
</span><a name="line-437"></a><span>
</span><a name="line-438"></a><span>            </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Nothing</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679338247"><span class="hs-identifier hs-var">renderText</span></a><span> </span><a href="#local-6989586621679338252"><span class="hs-identifier hs-var">text</span></a><span>
</span><a name="line-439"></a></pre></body></html>